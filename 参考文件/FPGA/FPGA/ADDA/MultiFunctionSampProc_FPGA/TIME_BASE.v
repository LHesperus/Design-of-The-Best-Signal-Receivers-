`timescale 1ns / 1ps
/////////////////////////////////////////////////////////////////////////////////
// 文件属性：		模块文件
// 文件功能：		时基信号产生
// 公司: 			上海宇志通信技术有限公司
// 工程师: 	   		XLX
// 创建日期:        2010年12月25日 
// 模块名:    		TIME_BASE 
// 项目名:   		MultiFunctionSignalSource
// 目标器件: 		EP2S60F484C4ES
// 工具版本:  		QII7.0
// 软件版本：		V1.1
// 额外标注: 
/////////////////////////////////////////////////////////////////////////////////

module TIME_BASE
(    
	clock,
	reset,				
	PROG_INT, 			
	INT_ENABLE              		
);
//////////////////////////////////////////////////////////////////////////////////
//输入输出IO引脚定义//
//////////////////////////////////////////////////////////////////////////////////
input									clock;
input									reset;
input	[31:0]							PROG_INT;					//设置中断查询周期
output	reg								INT_ENABLE;					//中断使能信号输出

//////////////////////////////////////////////////////////////////////////////////
//信号变量定义//
//////////////////////////////////////////////////////////////////////////////////
reg		[31:0]							CNT_FOR_INT;

/*********************************************************************************/
/************************************程序段开始***********************************/
/*********************************************************************************/

///////////////////////////////////////////////////////////////////////////////////
//产生INT_ENABLE信号//
///////////////////////////////////////////////////////////////////////////////////
	always @(posedge clock)
begin
	if(reset==1'b1)
		begin
			CNT_FOR_INT 	<= 0;
			INT_ENABLE		<= 1'b0;
		end
	else
		begin
			if(CNT_FOR_INT==0)
				begin
					CNT_FOR_INT 	<= PROG_INT;
					INT_ENABLE		<= 1'b1;
				end
			else
				begin
					CNT_FOR_INT 	<= CNT_FOR_INT - 1;
					INT_ENABLE		<= 1'b0;
				end
		end
end		
/*********************************************************************************/
/************************************程序段结束***********************************/
/*********************************************************************************/
endmodule